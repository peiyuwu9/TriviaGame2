<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Script -->
    <script type="text/javascript" src="assets/javascript/app.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Mirza|UnifrakturMaguntia&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-9">
                <h1>Total Trivial Trivia</h1>
                <p>10 questions about Game of Throne<p>
                <p>You have 10 seconds for each question</br></br></p>
                <botton id="start">Start</botton>
                <div id="timer-display"></div>
                <div id="question-display"></div>
            </div>
        </div>
    </div>
    <script>
        //Set up variable to hold the results.
        var correct = 0;
        var incorrect = 0;
        var unanswer = 0;
        var time = 10;
        var i = 0;

        //Count down 10 seconds and display as 00:00 format
        var timeInterval;
        function timer() {
            timeInterval = setInterval(count,1000);
        }
        function count() {
            time --;
            $("#timer-display").text("Time Remain 00:0" + time);
        }

        // //Reset timer
        // function restTimer() {
        //     time = 10;
        //     clearInterval();
        // }

        //Save questions as an object
        var questions = [
        {question: "1. How did Daenerys Targaryen eventually hatch her dragon eggs?", choices: ["In a lightning storm","In a funeral pyre","In a firepalce","In a frozen cave"], correctAnswer: "In a funeral pyre", userAnswer: ""},
        {question: "2. The phrase 'Valar Morghulis' or 'all men must die' is usually responed with:", choices: ["'Valar Dohaeris' or 'all men must serve'","'Valar Rohnas' or 'all men must live'","'Valar GoGo' or 'll men must dance'","'Valar Bhores' or 'all men must sleep'"], correctAnswer: "'Valar Dohaeris' or 'all men must serve'", userAnswer: ""},
        {question: "3. What is the only thing that can put out volatile Wildfire?", choices: ["Sand","Water","Dragon's Blood","Sunlight"], correctAnswer: "Sand", userAnswer: ""},
        {question: "4. Besides dargonglass, what is the only other substance capable of defeating White Walker?", choices: ["Weirdwood","Wildfire","Valrian Steel","Snowballs"], correctAnswer: "Valrian Steel", userAnswer: ""},
        {question: "5. How many times has Beric Dondarrion been brouhgt back to life?", choices: ["3","4","5","6"], correctAnswer: "6", userAnswer: ""},
        {question: "6. Which Starks family direwolf was killed in retaliation for an attack on Prince Joffery?", choices: ["Ghost","Lady","Nymeria","Summer"], correctAnswer: "Lady", userAnswer: ""},
        {question: "7. 'It's nothing' were the last words of this infamous character:", choices: ["Renly Baratheon","Tywon Lannister","Robb Stark","King Joffery"], correctAnswer: "King Joffery", userAnswer: ""},
        {question: "8. The name of King Tommen's favorite cat is:", choices: ["Battle Pus","Little Lion","Ser Pounce","Prince Fuzzy"], correctAnswer: "Ser Pounce", userAnswer: ""},
        {question: "9. How shoots the flaming arrow that subsequently destroies Stannis' fleet in Blackwater Bay?", choices: ["Tyrion Lannister","King Joffery","Jamie Lannister","Bronn"], correctAnswer: "Bronn", userAnswer: ""},
        {question: "10. Prince Oberyn Martell is nicknamed the 'Red Viper' because of his combat and:", choices: ["Pride in drawing blood first","Knowledge of poisons","Nighttime attacks","Ruby-colored armor"], correctAnswer: "Knowledge of poisons", userAnswer: ""},
        ]

        //Function to pop question
        function questionPop() {
            if (i<10) {
                time = 10;
                $("#question-display").html("");
                var questionPrint = $("<div>");
                questionPrint.text(questions[i].question);
                $("#question-display").append(questionPrint);
                for (var j=0; j<questions[i].choices.length; j++) {
                    var answerInput = $("<input>");
                    answerInput.attr("type","radio").attr("class","answerBtn").attr("name","answers").attr("value",questions[i].choices[j]).attr("id",questions[i].choices[j]);

                    var answerLabel = $("<label>");
                    answerLabel.attr("for",questions[i].choices[j]);
                    answerLabel.text(questions[i].choices[j]);
                    answerInput.append(answerLabel)
                    $("#question-display").append(answerInput).append(" ").append(answerLabel).append("<br>");
                }

                // Once players click submit button, go to next question
                $(".answerBtn").on("click",function(){
                    pushAnswer();
                    console.log(questions[i].userAnswer);
                    console.log(questions[i].userAnswer === questions[i].correctAnswer);
                    if (questions[i].userAnswer === questions[i].correctAnswer) {
                        var gifText = $("<div>");
                        gifText.text("You are correct!");
                        var gifImage = $("<iframe>");
                        gifImage.attr("src","https://giphy.com/embed/3o6ozuOnkpcJzeaBwY").attr("width","480").attr("height","270");
                        $("#question-display").append(gifText).append(gifImage);
                    }
                    else {
                        var gifText2 = $("<div>");
                        gifText2.text("You are NOT correct!");
                        var gifImage2 = $("<iframe>");
                        gifImage2.attr("src","https://giphy.com/embed/3o6ozuOnkpcJzeaBwY").attr("width","480").attr("height","270");
                        $("#question-display").append(gifText2).append(gifImage2);
                    }
                    i++;
                    console.log(i);
                    $("#timer-display").text("Time Remain: 00:10");
                    clearInterval(timeInterval);
                    questionPop();
                    timer();
                });
            }
            // Once players submit all 10 questions, result will be retured.
            else {
                resultPrint();
            }
        }

        //Once player select, return answers back to question array for resultcheck function
        function pushAnswer() {
            questions[i].userAnswer = $("input[name=answers]:checked").attr("value");
        }

        //Function to check result
        function resultChecker() {
            for (var k=0; k<questions.length; k++) {
                if (questions[k].userAnswer === questions[k].correctAnswer) {
                    correct ++;
                }
                else if (questions[k].userAnswer === undefined) {
                    unanswer ++;
                }
                else {
                    incorrect ++;
                }
            }
        }

        //Function to print result
        function resultPrint() {
        resultChecker();
        $("#timer-display").attr("style","display: none");
        var resultPrint = $("<h2>");
        resultPrint.attr("class","resultPrint");
        resultPrint.text("Submitted");
        $("#question-display").html(resultPrint);
        var resultPrint = $("<div>");
        resultPrint.attr("class","resultPrint");
        resultPrint.text("You got " + correct + " questions CORRECT");
        $("#question-display").append(resultPrint);
        var resultPrint = $("<div>");
        resultPrint.attr("class","resultPrint");
        resultPrint.text("You got " + incorrect + " questions INCORRECT");
        $("#question-display").append(resultPrint);
        var resultPrint = $("<div>");
        resultPrint.attr("class","resultPrint");
        resultPrint.text("You got " + unanswer + " questions UNANSWERED");
        $("#question-display").append(resultPrint);
        }

        //When players click start button, questions pop and timer starts.
        $("#start").on("click", function(){
            //After starts, start button will disapear
            $("p").attr("style","display: none");
            $("#start").attr("style","display: none");
            $("#timer-display").text("Time Remain: 00:10");
            questionPop();
            timer();
        });
        
    </script>
</body>
</html>